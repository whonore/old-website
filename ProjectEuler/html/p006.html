<div class="factor-code"><pre><span class="c">! Wolf Honore</span>
<span class="c">! Problem 006</span>
<span class="c">! Description: Find the difference between the sum of the squares of the first </span>
<span class="c">! one hundred natural numbers and the square of the sum.</span>
<span class="c">! Method: Computes the sum of the squares and the square of the sum using the</span>
<span class="c">! closed form equations and subtracts them. The naive sum-based methods are</span>
<span class="c">! also implemented but not used. </span>
<span class="c">! Running time: 2.281e-006 seconds</span>

<span class="kn">USING:</span> <span class="nn">kernel</span> <span class="nn">math</span> <span class="nn">math.ranges</span> <span class="nn">sequences</span> <span class="nn">tools.time</span> <span class="k">;</span>
<span class="kn">IN:</span> <span class="nn">eul.p006</span>

<span class="k">:</span> <span class="nf">sum-of-sq*</span> <span class="nf">( </span><span class="nv">max</span> <span class="nf">-- </span><span class="nv">n</span> <span class="nf">) </span>[1,b] [ <span class="nb">sq </span>] <span class="nb">map sum </span><span class="k">;</span>

<span class="k">:</span> <span class="nf">sq-of-sum*</span> <span class="nf">( </span><span class="nv">max</span> <span class="nf">-- </span><span class="nv">n</span> <span class="nf">) </span>[1,b] <span class="nb">sum sq </span><span class="k">;</span>

<span class="k">:</span> <span class="nf">sum-of-sq</span> <span class="nf">( </span><span class="nv">max</span> <span class="nf">-- </span><span class="nv">n</span> <span class="nf">) </span><span class="nb">dup </span>[ <span class="m">1 </span><span class="nb">+ </span>] [ <span class="m">2 </span><span class="nb">* </span><span class="m">1 </span><span class="nb">+ </span>] <span class="nb">bi * * </span><span class="m">6 </span><span class="nb">/ </span><span class="k">;</span>

<span class="k">:</span> <span class="nf">sq-of-sum</span> <span class="nf">( </span><span class="nv">max</span> <span class="nf">-- </span><span class="nv">n</span> <span class="nf">) </span>[ <span class="m">1 </span><span class="nb">+ </span>] <span class="nb">keep * </span><span class="m">2 </span><span class="nb">/ sq </span><span class="k">;</span>

<span class="k">:</span> <span class="nf">sq-sum-diff</span> <span class="nf">( </span><span class="nv">max</span> <span class="nf">-- </span><span class="nv">diff</span> <span class="nf">) </span>[ sq-of-sum ] [ sum-of-sq ] <span class="nb">bi - </span><span class="k">;</span>

<span class="k">:</span> <span class="nf">p006-run</span> <span class="nf">( -- </span><span class="nv">diff</span> <span class="nf">) </span><span class="m">100 </span>sq-sum-diff <span class="k">;</span>

<span class="k">:</span> <span class="nf">p006-time</span> <span class="nf">( -- </span><span class="nv">diff</span> <span class="nf">) </span>[ p006-run ] time <span class="k">;</span>
</pre></div>
